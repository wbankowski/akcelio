---
title: Day 1 - VuePress as a blog engine - Part 1
category: 100 Days Of Code
date: 2018-08-08
description: VuePress + some JavaScript and we have got a blog platform.
---

# VuePress as a blog engine? Why not.

## What VuePress is?

[VuePress](https://vuepress.vuejs.org) consists of two parts: a minimalist static page generator with a Vue-powered themes system and a default theme optimized for writing technical documentation. It was created to support the documentation needs of projects around the Vue ecosystem. According to these assumptions, however, it lacks the functionality needed to run a blog.

Each page generated by VuePress has its own pre-rendered static HTML, which provides excellent loading efficiency and is SEO friendly. After loading the page, Vue takes over the static content and turns it into a Single-Page Application (SPA). Additional pages are downloaded on request as you move around the page.

The content of documents is created through the MARKDOWN markup language together with the implemented metadata block [YAML Front Matter](https://jekyllrb.com/docs/frontmatter/). The .md file is compiled in HTML using [markdown-it](https://github.com/markdown-it/markdown-it) and then processed as a template for the Vue component. This allows you to use the Vue directly inside your .md files and so we can embed dynamic content. These are the features of VuePress that I will use to customize it for the needs of creating a blog platform, which everyone will be able to run in a few minutes and put on the hosting.

## Setup

The process of installing VuePress is very simple. We need Node.js and package manager Yarn (recommended) or npm. First we have to check what version of Node.js we have installed (version >= 8.0).

You can check the version using the terminal command:

```bash
node -v
```

If our version does not meet the requirements or if we do not have Node.js and Yarn installed, we do it of course.

If we already have Node.js and Yarn in the right version, we can create a directory of our project `/akcelio/` and enter this directory:

```bash
mkdir akcelio && cd $_
```

Via Yarn we install VuePress as a local dependency.

```bash
yarn add -D vuepress
```

We create a `/docs/` directory inside the project directory. This is where we will have all the files of our blog and configuration files. This way of placement allows us to add VuePress to the existing project.

```bash
mkdir docs
```

In the `/docs/directory`, we create a subdirectory of the`/.vuepress/`and place the `config.js` file in it. This file is the basic file configuring VuePress for our needs.

## Creating a category of entries in the sidebar using YAML Front Matter

The routing of individual pages in VuePress is carried out through catalogues and files. The `README.md` file must be located in the root `docs/directory` and the `REDAME.md` file must also be located in each of the subdirectories that are being created. For example, if you want to place a link to the Blog page in the menu, simply create a `/blog/` subdirectory in the `/docs/` directory and place the `README.md` file in it as if it were the home page of the directory. Inside we will later place individual blog entries in separate .md files. This is how I created my project structure. In order for routing to work properly we need to make the following entries in the `config.js` configuration file:

```js
module.exports = {
  title: "Akcel.io", // Enter the title of our page here (SEO)
  description: "MEVN (MongoDB, Express.js, Vue.js, Node.js)", // Enter a description here (SEO)
  ga: "", // Here you can enter your tracking code Google Analytics
  themeConfig: {
    nav: [{ text: "Blog", link: "/blog/" }] // This is how you create the navigation in the main menu
  }
};
```

:::tip Assumptions
The assumption I made for this project is that each of our blog entries will be in the Front Matter section of the .md file apart from **title** it will also contain **category** of the entry. I want to create a sidebar for the page **_Blog_** where our posts will appear under the relevant categories automatically. In this way we will not have to manually create category subdirectories in the `/blog/` directory and upload our .md files to them. We can put all posts into the directory `/blog/` and JavaScript will assign them in the sidebar to the appropriate categories for us.
:::

### Metadata YAML Front Matter in the individual posts from which the categories and titles of the posts will be created in the sidebar

In order for the creation of a category sidebar to work, each blog entry must have a Front Matter section at the top of the .md file, where you can specify at least the title of the post and the category to which it belongs. Such a block of metadata may contain other parameters that the VuePress engine can recognize and use by rendering the HTML file. The metadata section begins and ends with `---`. Below we can already write our content using the MARKDOWN markup language.

```
---
title: Sample title
category: Sample category
---
```

Since we already have our .md files completed with the corresponding `title` and `category` data, we can start writing an appropriate script in JavaScript, which we will place in our `config.js` file.

### Script in config.js file creating sidebar with categories of entries

To write a script we will need to install two additional packages as local dependencies: **glob** and **front-matter**. Once installed, they should be included as dependencies in the `package.json` file in the root directory of the project, in my case it is the `/akcelio/` directory.

Therefore, open our `config.js` file and paste the code below on top of the file before the `module.exports` command we wrote earlier, which we also modify by adding a sidebar to it, which will use our script. The complete `config.js` file should look like this:

```js
const { join, basename } = require("path");
const glob = require("glob");
const { readFileSync } = require("fs");
const fm = require("front-matter");

const generateSideBar = directory => {
  const structure = {};
  const directoryPath = join(__dirname, "..", directory);
  glob
    .sync("**/*.md", {
      cwd: directoryPath,
      ignore: "README.md",
      absolute: true
    })
    .map(filename => {
      const frontmatter = fm(readFileSync(filename, "utf8")).attributes;
      const rel = join(directory, basename(filename));
      const [title, category] = Object.values(frontmatter);
      return [rel, title, category];
    })
    .forEach(([rel, title, category]) => {
      structure[category] = {
        ...structure[category],
        [title]: rel
      };
    });
  const categories = Object.keys(structure).sort();
  const sidebar = [
    ...categories.map(cat => {
      const names = Object.values(structure[cat]).sort();
      return {
        title: cat,
        collapsable: false,
        children: Array.from(names)
      };
    })
  ];
  return sidebar;
};

module.exports = {
  title: "Akcel.io",
  description: "MEVN (MongoDB, Express.js, Vue.js, Node.js)",
  ga: "",
  themeConfig: {
    nav: [{ text: "Blog", link: "/blog/" }],
    sidebar: {
      "/blog/": ["", ...generateSideBar("/blog")]
    },
    sidebarDepth: 0
  }
};
```

We save our file `config.js` and we can enjoy the automatically created sidebar based on the post category placed in the Front Matter section of the individual .md files.

### Start-up of the developer server (hot reload)

Now that we have created the structure of our blog, written configuration script, created sidebar with categories, we should see the effect of our work. We need a development server for this, which VuePress delivers for us. What is interesting, we immediately have the so-called "hot reload" provided, i.e. after making changes in the code and saving our file the server automatically renders the content of the page anew so that we can see the effects of the changes without having to reload the page in the browser. Therefore, we are starting the Terminal and entering:

```bash
vuepress dev docs
```

After a while, we will receive a message of this kind:
`> VuePress dev server listening at http://localhost:8080/`

Start the browser by entering the above mentioned localhost address and port number. As you will see, you can already click and open the individual posts in the category from the sidebar. If you enter the page **_Blog_** via the main menu, you will see an empty page of the `README.md` file, which you have placed in the `/blog/`directory. I would like this page to appear in the form of a grid tiles with all the posts ordered by date. The tile will contain the title of the post, the category, the date and a short description. I will use the Vue component, which I will create earlier and then place in the `/blog/README.md` file. That is what I will do next day.
